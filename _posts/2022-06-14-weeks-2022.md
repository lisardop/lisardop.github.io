---
layout: post
title: 2022 Code Period
subtitle: (13 Jun - 19 Sep 2022)
cover-img: /assets/img/path.jpg
thumbnail-img: /assets/img/thumb.png
share-img: /assets/img/path.jpg
gh-repo: daattali/beautiful-jekyll
tags: [SGoC2022, Aztec glyphs]
---

## WEEK 1 Reshape existing images
*13 - 19 JUN*

We have a bunch of Codex Mendoza files from our previous GSoC project (more files are going to be added soon):
- Simplex (209): glyph is a whole unity
- Compound (364): glyph is a block of minor unities
- Atomic (714): minor unities isolated
- Iconography (12): another elements depicted, not logographyc glyphs but related
- Everything (1295): all previous files in same folder
- Augmented (6431): all glyphs of previous folder were shifted/rotate and generate an artificial expanded dataset made by Tarun.

![acatepecaugmented](/assets/img/Acatepec_augmented.jpg)

*This is an example of augmented compound glyph 'Acatepec'*

A successful match for the algorithm is determined by figure colours and its shape/position. We consider framing (250x250 or 500x500) a couple of testing images, with a small margin and transparent background or emulating light-brown paper (stored as PNG instead JPG/JPEG files to maintain transparency):

![ahuatepectransparentpaper](/assets/img/Ahuatepec_transparent_paper.jpg)

*Ahuatepec original glyph in JPG, and transparent and paper-color glyphs 500x500 stored as PNG extension*

Another problem we are dealing with is the optimal way to name files. Theoretically, the name of the file is irrelevant when the image is processed, but we want to link it to its glyphic value and with potential entries in the visual dictionary.

There are two options for this task:
- Implement a way to obtain the info from the Drupal DB, with the cost of time and complexity that may arise.
- Rename files so Python code can extract it as a kind of metadata, print it on screen and build the web link for entries in the dictionary.

The second option could be something like this: name-type-pagination-source-extrainfo.png

I.E. : 

![ahuatloaktree](/assets/img/ahuatloaktree.jpg)

*ahuatl-atomic-21v-Mendoza-oaktree-Ahuatepec.png*

But we have the Visual Lexicon entries under this form: 

https://aztecglyphs.uoregon.edu/content/[ahuatl-21v](https://aztecglyphs.uoregon.edu/content/ahuatl-21v)

![ahuatlvisuallexicon](/assets/img/ahuatl_visual_lexicon.jpg)

or from other codices (AGN, Tierras, vol. 1871, exp. 1 = t18711):

https://aztecglyphs.uoregon.edu/content/[20-matl-t18711](https://aztecglyphs.uoregon.edu/content/20-matl-t18711)

So in our example, the 'real' image-relate expected link is:

https://aztecglyphs.uoregon.edu/content/[ahuatl-21v](https://aztecglyphs.uoregon.edu/content/ahuatl-21v)

From there, there is an internal link to Online Nahuatl Dictionary:

![ahuatlvisuallexicondetail](/assets/img/ahuatl_visual_lexicon_detail.jpg)

https://nahuatl.uoregon.edu/content/[ahuatl](https://nahuatl.uoregon.edu/content/ahuatl)

![ahuatlOND](/assets/img/ahuatl_OND.jpg)

Another temporal solution should be just get the glyph name in the first filename position an establish a search-link, so user can check all available entries for Visual Lexicon:

https://aztecglyphs.uoregon.edu/fulltext-quick-search?search_api_views_fulltext=[ahuatl](https://aztecglyphs.uoregon.edu/fulltext-quick-search?search_api_views_fulltext=ahuatl)

![ahuatlsearch](/assets/img/ahuatl_search.jpg)



## WEEK 2 Capture, edit, crop and delete surrounding material in glyphs. Expand the dataset as needed.
*20 - 26 JUN*

'Matrícula de Tributos' (ca. 1520-30) is a best candidate for expand the dataset (as we have so few examples of each glyph) but the algorythm showed a not so bad accuracity but failed when the same glyph was light or very dark colored. This is the main problem to deal with Matrícula de Tributos. It has 31 painted sheets of indigenous paper, amate (while Codex Mendoza, ca. 1540 was made in European paper). Some sheets of Matricula de Tributos have lost some parts of the fibers and having a light-brown color due its antiquity and conservation. Although, some painted figures are partial lost or color-vanished, so we decided to edit them with software and get the most possible approach to its 'original' paiting brightness.

These are some of our results using the free images available in [World Digital Library](https://www.loc.gov/resource/gdcwdl.wdl_03248/):

![MT1comp](/assets/img/MT_1comp.jpg)

*Matrícula de Tributos, sheet 1, very damaged*

![MT1comp29](/assets/img/MT_1comp29.jpg)

*Matrícula de Tributos, sheet 29. Black, green, blue and red are the most vanished*

Here, a quick example of a glyph cropped and compared with our previous dataset:

![Tecualoyanexamples](/assets/img/Tecualoyan_examples.jpg)

*Comparson between codices and digital treatments: A. Non-retouched glyph 'Tecualoyan' in Codex Mendoza; B. 'Tecualoyan' in 500x500 paper-color background; C. Non-retouched glyph 'Tecualoyan' in Matrícula de Tributos; D. Same glyph color-contrasted; E. Previous example cropped with a 500x500 paper-color background. F. Previous example mirrored.*


## WEEK 3
*27 JUN - 3 JUL*

Now, I am going to crop each figure from each Matrícula de Tributos' sheet, starting from left-up corner, going down and so on untill the right-down corner. I crop all elements depicted (iconographic, glyphic or numerals).
But, each 'compound' or glyphic-block is cropped as a whole. Numerals presents in glyphs or iconography (as a graphic part) are cropped together with the main figure if they are visual integrated, as in these examples:

![20shields](/assets/img/04_img15.png)

*20 number (pantli, as a white flag) in the top of a chimalli-shield*

![400blanquets](/assets/img/03_img26.png)

*400 (20x20) number (centzontli, as a kind of black hair comb) in the top of a white blanquet*

![8000paperbundle](/assets/img/05_img11.png)

*8000 (20x400) number (xiquipilli, as a white bag) under a paper bundle*

I will crop them in atomic glyphs later, but now total result is 849 main elements.

I am going to make a test before start removing peripheral details and determining which is the best type of background for a high match with the original dataset:

I choose two particular glyphs due to their similar shape between codices but no colored and a damage one. One is Ahuatepec glyph (Matrícula de Tributos, sheet 4) is present in Codex Mendoza, 21v.

![Ahuatepec_MT](/assets/img/Ahuatepec_MT.jpg)

*Left: Ahuatepec in Matrícula de Tributos, sh.4. Right: Glyphs from Mendoza match-expected*

![Ahuatepec_MTversions](/assets/img/Ahuatepec_MTversions.jpg)

*Some diferents backgrounds and artificial glyph colored (last one example is the most closed to Mendoza's example)*

The other one is Ozoma (Matrícula de Tributos, sheet 1: partially damaged) but related with Oztotl in Codex Mendoza, 24v.


## WEEK 4
*4 - 10 JUN* separar y poner fondo

## WEEK 5
*11 - 17 JUL* otros codices

## WEEK 6 Add new material into dataset, export material for testing
*18 - 24 JUL*

## WEEK 7 Mentors and contributors can begin submitting Phase 1 evaluations
*25 - 31 JUN*

## WEEK 8 Test algorithm using improved dataset, get results
*1 - 7 AGO*

## WEEK 9
*8 - 14 AGO*

## WEEK 10
*15 - 21 AGO*

## WEEK 11 Develop code to link each image with online database entries in Visual Lexicon
*22 - 28 AGO*

## WEEK 12 Prepare the report and indicate future steps
*29 AGO - 4 SEP*

## SEP 5 ~ END;
*13 - 19 JUN*

